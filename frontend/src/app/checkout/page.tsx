"use client";

import { useEffect, useState } from "react";
import { useCart } from "@/context/CartContext";
import { useRouter } from "next/navigation";
import Image from "next/image";
import styles from "./checkout.module.scss";

type DeliveryMethod = "pickup" | "delivery";

// –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –¥–ª—è Telegram –±–æ—Ç–∞
const TELEGRAM_BOT_TOKEN = "7364548522:AAGpn05pGfX3rqtu8if1BDxILlbtOUGHbeA";
const TELEGRAM_CHAT_ID = "-1002155675591";

// –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è –∑–∞–∫–∞–∑–∞
const MIN_PACKS_FOR_DELIVERY = 10;
const MIN_BLOCKS_FOR_DELIVERY = 1;
const MIN_ORDER_AMOUNT = 3500; // 3.5 —Ç—ã—Å—è—á–∏ —Ä—É–±–ª–µ–π

const site = "terea-store.ru";

export default function CheckoutPage() {
  function encodeImageUrl(url: string): string {
    if (!url) return "https://placehold.net/600x600.png";

    try {
      // –ï—Å–ª–∏ —ç—Ç–æ –∞–±—Å–æ–ª—é—Ç–Ω—ã–π URL
      if (url.startsWith("http")) {
        const urlObj = new URL(url);
        urlObj.pathname = encodeURI(urlObj.pathname);
        return urlObj.toString();
      }

      // –ï—Å–ª–∏ —ç—Ç–æ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –ø—É—Ç—å
      const parts = url.split("/");
      const encodedParts = parts.map((part) =>
        part.includes("%") || part === "" ? part : encodeURIComponent(part)
      );
      return encodedParts.join("/");
    } catch (error) {
      console.warn("Error encoding image URL:", url, error);
      return "https://placehold.net/600x600.png"; // üî• –í—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º fallback –ø—Ä–∏ –æ—à–∏–±–∫–µ
    }
  }
  const { items, totalPrice, clearCart } = useCart();
  const router = useRouter();

  const [isSubmitting, setIsSubmitting] = useState(false);
  const [deliveryMethod, setDeliveryMethod] =
    useState<DeliveryMethod>("delivery"); // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–æ—Å—Ç–∞–≤–∫–∞
  const [agreementChecked, setAgreementChecked] = useState(false); // –î–æ–±–∞–≤–ª–µ–Ω–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è —á–µ–∫–±–æ–∫—Å–∞

  const [formData, setFormData] = useState({
    name: "",
    phone: "",
    city: "",
    address: "",
  });

  const pickupAddress = "–≥. –ú–æ—Å–∫–≤–∞, —É–ª. –ü—Ä–∏–º–µ—Ä–Ω–∞—è, –¥. 123, –æ—Ñ–∏—Å 45";

  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–æ–≤–∞—Ä–æ–≤ –∏ —Å—É–º–º—ã
  const canOrderDelivery = () => {
    const totalPacks = items.reduce((sum, item) => {
      // –ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º, —á—Ç–æ —Ç–æ–≤–∞—Ä—ã —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ –∏–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏ —è–≤–ª—è—é—Ç—Å—è –ø–∞—á–∫–∞–º–∏
      const isPack =
        item.name.toLowerCase().includes("–ø–∞—á–∫–∞") ||
        item.name.toLowerCase().includes("sticks");
      return isPack ? sum + item.quantity : sum;
    }, 0);

    const totalBlocks = items.reduce((sum, item) => {
      // –ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º, —á—Ç–æ —Ç–æ–≤–∞—Ä—ã —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ –∏–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏ —è–≤–ª—è—é—Ç—Å—è –±–ª–æ–∫–∞–º–∏
      const isBlock =
        item.name.toLowerCase().includes("–±–ª–æ–∫") ||
        item.name.toLowerCase().includes("block");
      return isBlock ? sum + item.quantity : sum;
    }, 0);

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤—Å–µ —É—Å–ª–æ–≤–∏—è: –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø–∞—á–µ–∫ –ò–õ–ò –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±–ª–æ–∫–æ–≤ –ò–õ–ò —Å—É–º–º–∞ –∑–∞–∫–∞–∑–∞ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞
    return (
      totalPacks >= MIN_PACKS_FOR_DELIVERY ||
      totalBlocks >= MIN_BLOCKS_FOR_DELIVERY ||
      totalPrice >= MIN_ORDER_AMOUNT
    );
  };

  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø—Ä–∏—á–∏–Ω—ã –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –¥–æ—Å—Ç–∞–≤–∫–∏
  const getDeliveryRestrictionReason = () => {
    const { packs, blocks } = getProductCounts();
    const reasons = [];

    if (packs < MIN_PACKS_FOR_DELIVERY) {
      reasons.push(`${MIN_PACKS_FOR_DELIVERY} –ø–∞—á–µ–∫`);
    }
    if (blocks < MIN_BLOCKS_FOR_DELIVERY) {
      reasons.push(`${MIN_BLOCKS_FOR_DELIVERY} –±–ª–æ–∫`);
    }
    if (totalPrice < MIN_ORDER_AMOUNT) {
      reasons.push(`${MIN_ORDER_AMOUNT.toLocaleString("ru-RU")} ‚ÇΩ`);
    }

    return reasons.length > 0
      ? `–î–ª—è –∑–∞–∫–∞–∑–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –º–∏–Ω–∏–º—É–º ${reasons.join(" –ò–õ–ò ")}`
      : null;
  };

  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–¥—Å—á–µ—Ç–∞ —Ç–µ–∫—É—â–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–∞—á–µ–∫ –∏ –±–ª–æ–∫–æ–≤
  const getProductCounts = () => {
    const packs = items.reduce((sum, item) => {
      const isPack =
        item.name.toLowerCase().includes("–ø–∞—á–∫–∞") ||
        item.name.toLowerCase().includes("sticks");
      return isPack ? sum + item.quantity : sum;
    }, 0);

    const blocks = items.reduce((sum, item) => {
      const isBlock =
        item.name.toLowerCase().includes("–±–ª–æ–∫") ||
        item.name.toLowerCase().includes("block");
      return isBlock ? sum + item.quantity : sum;
    }, 0);

    return { packs, blocks };
  };

  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram
  const sendTelegramNotification = async (orderData: any) => {
    try {
      // –§–æ—Ä–º–∏—Ä—É–µ–º –∫—Ä–∞—Å–∏–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è Telegram
      const message = `
–∑–∞–∫–∞–∑ —Å —Å–∞–π—Ç–∞ terea-store.ru


–ò–º—è: ${orderData.customer_name}
–¢–µ–ª–µ—Ñ–æ–Ω: ${orderData.phone_number}
–°–ø–æ—Å–æ–± –¥–æ—Å—Ç–∞–≤–∫–∏: ${orderData.is_delivery ? "–î–æ—Å—Ç–∞–≤–∫–∞" : "–°–∞–º–æ–≤—ã–≤–æ–∑"}

${
  orderData.is_delivery
    ? `
 –ì–æ—Ä–æ–¥: ${orderData.city}
 –ê–¥—Ä–µ—Å: ${orderData.address}`
    : ``
}

–ö–æ—Ä–∑–∏–Ω–∞:
${orderData.ordered_items
  .map(
    (item: any, index: number) =>
      `‚Ä¢ ${item.product_name} x${
        item.quantity
      }: ${item.price_at_time_of_order.toLocaleString("ru-RU")} ‚ÇΩ`
  )
  .join("\n")}

 *–û–±—â–∞—è —Å—É–º–º–∞:* ${totalPrice.toLocaleString("ru-RU")} ‚ÇΩ
      `.trim();

      // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ Telegram
      const response = await fetch(
        `https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage`,
        {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify({
            chat_id: TELEGRAM_CHAT_ID,
            text: message,
            parse_mode: "Markdown",
          }),
        }
      );

      if (!response.ok) {
        const errorData = await response.json();
        console.error("–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ Telegram:", errorData);
        throw new Error("–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram");
      }

      return true;
    } catch (error) {
      console.error("‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –≤ Telegram:", error);
      // –ù–µ –ø—Ä–µ—Ä—ã–≤–∞–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π –ø–æ—Ç–æ–∫ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞ –∏–∑-–∑–∞ –æ—à–∏–±–∫–∏ Telegram
      return false;
    }
  };

  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Whatsapp
  const sendWhatsappNotification = async (orderData: any) => {
    
    const moscowCities = [
        "–º–æ—Å–∫–≤–∞",
        "–∑–µ–ª–µ–Ω–æ–≥—Ä–∞–¥",
        "—Ç—Ä–æ–∏—Ü–∫",
        "–º–æ—Å–∫–æ–≤—Å–∫–∏–π",
        "—â–µ—Ä–±–∏–Ω–∫–∞",
        "–Ω–æ–≤–∞—è –º–æ—Å–∫–≤–∞",
        "—Ç–µ–ø–ª—ã–π —Å—Ç–∞–Ω",
        "–∫–æ–º–º—É–Ω–∞—Ä–∫–∞",
        "—Å–æ—Å–µ–Ω–∫–∏",
        "–±—É—Ç–æ–≤–æ",
        "–≤–Ω—É–∫–æ–≤–æ",
        "—Å–æ–ª–Ω—Ü–µ–≤–æ",
        "—Ñ–∏–ª–∏",
        "–Ω–æ–≤–æ–∫–æ—Å–∏–Ω–æ",
        "–¥–æ–º–æ–¥–µ–¥–æ–≤–æ",
        "–±–µ–ª—è–µ–≤–æ",
        "—è—Å–µ–Ω–µ–≤–æ",
        "—Ü–∞—Ä–∏—Ü—ã–Ω–æ",
        "–º–∞—Ä—å–∏–Ω–æ",
        "–ª—é–±–ª–∏–Ω–æ",
        "–≤–µ—à–Ω—è–∫–∏",
        "–ø–µ—á–∞—Ç–Ω–∏–∫–∏",
        "–∂—É–ª–µ–±–∏–Ω–æ",
        "–∫—É–∑—å–º–∏–Ω–∫–∏",
        "—á–µ—Ä—Ç–∞–Ω–æ–≤–æ",
        "—è–∫–∏–º–∞–Ω–∫–∞",
        "–∏–∑–º–∞–π–ª–æ–≤–æ",
        "–º–∏—Ç–∏–Ω–æ",
        "–∫—É—Ä–∫–∏–Ω–æ",
        "—Å–µ–≤–µ—Ä–Ω–æ–µ –±—É—Ç–æ–≤–æ",
        "—é–∂–Ω–æ–µ –±—É—Ç–æ–≤–æ",
        "–ø–æ—Å–µ–ª–µ–Ω–∏–µ –¥–µ—Å–µ–Ω–æ–≤—Å–∫–æ–µ",
        "–ø–æ—Å–µ–ª–µ–Ω–∏–µ —Ñ–∏–ª–∏–º–æ–Ω–∫–æ–≤—Å–∫–æ–µ",
        "–ø–æ—Å–µ–ª–µ–Ω–∏–µ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—Å–∫–æ–µ",
        "–ø–æ—Å–µ–ª–µ–Ω–∏–µ –º–∞—Ä—É—à–∫–∏–Ω—Å–∫–æ–µ",
        "–ø–æ—Å–µ–ª–µ–Ω–∏–µ –º–æ—Å—Ä–µ–Ω—Ç–≥–µ–Ω",
        "–ø–æ—Å–µ–ª–µ–Ω–∏–µ —Ä—è–∑–∞–Ω–æ–≤—Å–∫–æ–µ",
        "–ø–æ—Å–µ–ª–µ–Ω–∏–µ —Å–æ–∫–æ–ª–æ–≤–æ-–º–µ—â–µ—Ä—Å–∫–æ–µ",
        "–ø–æ—Å–µ–ª–µ–Ω–∏–µ —â–∞–ø–æ–≤—Å–∫–æ–µ",
        "–ø–æ—Å–µ–ª–µ–Ω–∏–µ –∫—Ä–∞—Å–Ω–æ–ø–∞—Ö–æ—Ä—Å–∫–æ–µ",
        "–ø–æ—Å–µ–ª–µ–Ω–∏–µ —â–µ—Ä–±–∏–Ω–∫–∞",
        "–ø–æ—Å–µ–ª–µ–Ω–∏–µ –ø–µ—Ä–≤–æ–º–∞–π—Å–∫–æ–µ",
        "–ø–æ—Å–µ–ª–µ–Ω–∏–µ –º–æ—Å–∫–æ–≤—Å–∫–∏–π",
        "–ø–æ—Å–µ–ª–µ–Ω–∏–µ —Ç—Ä–æ–∏—Ü–∫",
        "–ø–æ—Å–µ–ª–µ–Ω–∏–µ —à–∏—à–∫–∏–Ω –ª–µ—Å",
        "–ø–æ—Å–µ–ª–µ–Ω–∏–µ –∫–∏—ë–≤—Å–∫–∏–π",
        "–ø–æ—Å–µ–ª–µ–Ω–∏–µ –∫–∞–ª–∏–Ω–∏–Ω–µ—Ü",
        "–ø–æ—Å–µ–ª–µ–Ω–∏–µ –∞–∫—Å–∏–Ω—å–∏–Ω–æ",
        "–ø–æ—Å–µ–ª–µ–Ω–∏–µ –±—ã–ª–æ–≤–æ",
        "–ø–æ—Å–µ–ª–µ–Ω–∏–µ –≤–∞—Ä–≤–∞—Ä–∏–Ω–æ",
        "–ø–æ—Å–µ–ª–µ–Ω–∏–µ –∫–æ–≥–æ—Ç–∫–æ–≤–æ",
        "–ø–æ—Å–µ–ª–µ–Ω–∏–µ –∫–ª–µ–Ω–æ–≤–æ",
        "–ø–æ—Å–µ–ª–µ–Ω–∏–µ –≥–æ—Ä—á–∞–∫–æ–≤–æ",
        "–ø–æ—Å–µ–ª–µ–Ω–∏–µ –∫—Ä–µ–∫—à–∏–Ω–æ",
        "–ø–æ—Å–µ–ª–µ–Ω–∏–µ –ª–µ—Å–Ω–æ–π –≥–æ—Ä–æ–¥–æ–∫",
        "—Ö–∏–º–∫–∏",
        "–º—ã—Ç–∏—â–∏",
        "–±–∞–ª–∞—à–∏—Ö–∞",
        "–ª—é–±–µ—Ä—Ü—ã",
        "—Ä–µ—É—Ç–æ–≤",
        "–∫–æ—Ä–æ–ª–µ–≤",
        "–æ–¥–∏–Ω—Ü–æ–≤–æ",
        "–¥–æ–ª–≥–æ–ø—Ä—É–¥–Ω—ã–π",
        "–≤–ª–∞—Å–∏—Ö–∞",
        "–≤–∏–¥–Ω–æ–µ",
        "—â–µ—Ä–±–∏–Ω–∫–∞",
        "–∫–æ—Ç–µ–ª—å–Ω–∏–∫–∏",
        "–Ω–æ–≤–æ–∫–æ—Å–∏–Ω–æ",
        "—ç–ª–µ–∫—Ç—Ä–æ—Å—Ç–∞–ª—å",
        "–∂–µ–ª–µ–∑–Ω–æ–¥–æ—Ä–æ–∂–Ω—ã–π",
        "–ª–∞–∑–∞—Ä–µ–≤–æ",
        "—Ç–µ–∫—Å—Ç–∏–ª—å—â–∏–∫–∏",
        "–Ω–æ–≤–æ–ø–µ—Ä–µ–¥–µ–ª–∫–∏–Ω–æ",
        "—Å–µ–≤–µ—Ä–Ω–æ–µ —Ç—É—à–∏–Ω–æ",
        // –î–æ–ø–æ–ª–Ω–µ–Ω–∏—è:
        "–∞–ø—Ä–µ–ª–µ–≤–∫–∞",
        "–∫—Ä–∞—Å–Ω–æ–≥–æ—Ä—Å–∫",
        "–ª–µ–Ω–∏–Ω—Å–∫–∏–π",
        "–ø–æ–¥–æ–ª—å—Å–∫",
        "–¥–∑–µ—Ä–∂–∏–Ω—Å–∫–∏–π",
        "–¥–æ–ª–≥–æ–ø—Ä—É–¥–Ω—ã–π",
        "–ª–æ–±–Ω—è",
        "–∏–≤–∞–Ω—Ç–µ–µ–≤–∫–∞",
        "—Ñ—Ä—è–∑–∏–Ω–æ",
        "—Å–æ—Ñ—Ä–∏–Ω–æ",
        "–ø—É—à–∫–∏–Ω–æ",
        "—â–µ–ª–∫–æ–≤–æ",
        "–∂—É–∫–æ–≤—Å–∫–∏–π",
        "—Ä–∞–º–µ–Ω—Å–∫–æ–µ",
        "–±—Ä–æ–Ω–Ω–∏—Ü—ã",
        "–ª–∏–∫–∏–Ω–æ-–¥—É–ª–µ–≤–æ",
        "—ç–ª–µ–∫—Ç—Ä–æ–≥–æ—Ä—Å–∫",
        "–ø–∞–≤–ª–æ–≤—Å–∫–∏–π –ø–æ—Å–∞–¥",
        "—Å—Ç–∞—Ä–∞—è –∫—É–ø–∞–≤–Ω–∞",
        "–¥–º–∏—Ç—Ä–æ–≤",
        "—Å–æ–ª–Ω–µ—á–Ω–æ–≥–æ—Ä—Å–∫",
        "–∑–µ–ª–µ–Ω–æ–≥—Ä–∞–¥",
        "–∫—É–±–∏–Ω–∫–∞",
        "–Ω–∞—Ä–æ-—Ñ–æ–º–∏–Ω—Å–∫",
        "—Ä—É–∑–∞",
        "–≤–æ–ª–æ–∫–æ–ª–∞–º—Å–∫",
        "–∏—Å—Ç—Ä–∞",
        "—á–µ—Ö–æ–≤",
        "—Å–µ—Ä–ø—É—Ö–æ–≤",
        "–∫–∞—à–∏—Ä–∞",
        "—Å—Ç–æ–ª–±–æ–≤–∞—è",
        "–ª–µ—Å–Ω–æ–π –≥–æ—Ä–æ–¥–æ–∫",
        "–ø–µ—Ä–µ–¥–µ–ª–∫–∏–Ω–æ",
        "–≤–Ω—É–∫–æ–≤–æ",
        "—Ä–∞–º–µ–Ω–∫–∏",
        "–∫–æ–Ω—å–∫–æ–≤–æ",
        "—Ç—ë–ø–ª—ã–π —Å—Ç–∞–Ω",
        "—è—Å–µ–Ω–µ–≤–æ",
        "–º–µ–¥–≤–µ–¥–∫–æ–≤–æ",
        "–∞–ª—Ç—É—Ñ—å–µ–≤–æ",
        "–±–∏–±–∏—Ä–µ–≤–æ",
        "–æ—Ç—Ä–∞–¥–Ω–æ–µ",
        "—Å–≤–∏–±–ª–æ–≤–æ",
        "–∞–ª–µ–∫—Å–µ–µ–≤—Å–∫–∏–π",
        "—Ä–∏–∂—Å–∫–∏–π",
        "–ø—Ä–æ—Å–ø–µ–∫—Ç –º–∏—Ä–∞",
        "—Å—É—â—ë–≤—Å–∫–∏–π",
        "–º–∞—Ä—Ñ–∏–Ω–æ",
        "–æ—Å—Ç–∞–Ω–∫–∏–Ω–æ",
        "—Ä–æ—Å—Ç–æ–∫–∏–Ω–æ",
        "—á–µ—Ä–∫–∏–∑–æ–≤–æ",
        "–ø—Ä–µ–æ–±—Ä–∞–∂–µ–Ω—Å–∫–æ–µ",
        "—Å–æ–∫–æ–ª—å–Ω–∏–∫–∏",
        "–±–æ–≥–æ—Ä–æ–¥—Å–∫–æ–µ",
        "–º–µ—Ç—Ä–æ–≥–æ—Ä–æ–¥–æ–∫",
        "–≥–æ–ª—å—è–Ω–æ–≤–æ",
        "–∏–∑–º–∞–π–ª–æ–≤–æ",
        "–≤–æ—Å—Ç–æ—á–Ω–æ–µ –∏–∑–º–∞–π–ª–æ–≤–æ",
        "—Å–µ–≤–µ—Ä–Ω–æ–µ –∏–∑–º–∞–π–ª–æ–≤–æ",
        "–∫–æ–≤—Ä–æ–≤–æ",
        "–ø–µ—Ä–æ–≤–æ",
        "–Ω–æ–≤–æ–≥–∏—Ä–µ–µ–≤–æ",
        "–≤–µ—à–Ω—è–∫–∏",
        "–≤—ã—Ö–∏–Ω–æ-–∂—É–ª–µ–±–∏–Ω–æ",
        "—Ä—é–º–∏–Ω–æ",
        "–∫–∞–ø–æ—Ç–Ω—è",
        "–∫—É–∑—å–º–∏–Ω–∫–∏",
        "–ª–µ—Ñ–æ—Ä—Ç–æ–≤–æ",
        "–Ω–∏–∂–µ–≥–æ—Ä–æ–¥—Å–∫–∏–π",
        "—Ç–µ–∫—Å—Ç–∏–ª—å—â–∏–∫–∏",
        "—é–∂–Ω–æ–ø–æ—Ä—Ç–æ–≤—ã–π",
        "–ø–µ—á–∞—Ç–Ω–∏–∫–∏",
        "–Ω–∞–≥–∞—Ç–∏–Ω–æ-—Å–∞–¥–æ–≤–Ω–∏–∫–∏",
        "–Ω–∞–≥–∞—Ç–∏–Ω—Å–∫–∏–π –∑–∞—Ç–æ–Ω",
        "–¥–∞–Ω–∏–ª–æ–≤—Å–∫–∏–π",
        "–¥–æ–Ω—Å–∫–æ–π",
        "–Ω–∞–≥–æ—Ä–Ω—ã–π",
        "–Ω–∞–≥–∞—Ç–∏–Ω–æ",
        "–∑—è–±–ª–∏–∫–æ–≤–æ",
        "–±—Ä–∞—Ç–µ–µ–≤–æ",
        "–∞–ª–º–∞-–∞—Ç–∏–Ω—Å–∫–∞—è",
        "–∫–∞–ª–∏—Ç–Ω–∏–∫–∏",
        "–∫–æ—Ç–ª–æ–≤–∫–∞",
        "–æ–±—Ä—É—á–µ–≤—Å–∫–∏–π",
        "–∫–æ–Ω—å–∫–æ–≤–æ",
        "–±–µ–ª—è–µ–≤–æ",
        "—á—ë—Ä—ë–º—É—à–∫–∏",
        "–∞–∫–∞–¥–µ–º–∏—á–µ—Å–∫–∏–π",
        "–≥–∞–≥–∞—Ä–∏–Ω—Å–∫–∏–π",
        "–ª–µ–Ω–∏–Ω—Å–∫–∏–π –ø—Ä–æ—Å–ø–µ–∫—Ç",
        "—è–∫–∏–º–∞–Ω–∫–∞",
        "–∞—Ä–±–∞—Ç",
        "–ø—Ä–µ—Å–Ω–µ–Ω—Å–∫–∏–π",
        "—Ç–≤–µ—Ä—Å–∫–æ–π",
        "–º–µ—â–∞–Ω—Å–∫–∏–π",
        "–∫—Ä–∞—Å–Ω–æ—Å–µ–ª—å—Å–∫–∏–π",
        "–±–∞—Å–º–∞–Ω–Ω—ã–π",
        "—Ç–∞–≥–∞–Ω—Å–∫–∏–π",
        "–∑–∞–º–æ—Å–∫–≤–æ—Ä–µ—á—å–µ",
        "—Ö–∞–º–æ–≤–Ω–∏–∫–∏",
        "—è–∫–∏–º–∞–Ω–∫–∞",
        "–∫—Ä—ã–ª–∞—Ç—Å–∫–æ–µ",
        "–∫—É–Ω—Ü–µ–≤–æ",
        "—Ñ–∏–ª—ë–≤—Å–∫–∏–π –ø–∞—Ä–∫",
        "—Ñ–∏–ª–∏-–¥–∞–≤—ã–¥–∫–æ–≤–æ",
        "–¥–æ—Ä–æ—Ö–æ–≤–æ",
        "—Å–µ—Ç—É–Ω—å",
        "–ø—Ä–æ—Ç–≤–∏–Ω–æ",
        "–ø—É—â–∏–Ω–æ",
        "—Å–µ—Ä–≥–∏–µ–≤ –ø–æ—Å–∞–¥",
        "–∫—Ä–∞—Å–Ω–æ–∑–∞–≤–æ–¥—Å–∫",
        "–ø–µ—Ä–µ—Å–≤–µ—Ç",
        "—Ö–æ—Ç–æ–≤–æ",
        "–∞–±—Ä–∞–º—Ü–µ–≤–æ",
        "—Å–æ—Ñ—Ä–∏–Ω–æ",
        "–ø—É—à–∫–∏–Ω–æ",
        "–∏–≤–∞–Ω—Ç–µ–µ–≤–∫–∞",
        "—Ñ—Ä—è–∑–∏–Ω–æ",
        "–∫–æ—Ä–æ–ª—ë–≤",
        "—é–±–∏–ª–µ–π–Ω—ã–π",
        "–ª–æ—Å–∏–Ω–æ-–ø–µ—Ç—Ä–æ–≤—Å–∫–∏–π",
        "–º–æ–Ω–∏–Ω–æ",
        "—â—ë–ª–∫–æ–≤–æ",
        "—Ñ—Ä–∏–¥—Ä–∏—Ö—Å–≥–∞–º",
        "—Å—Ç–∞—Ä–∞—è –∫—É–ø–∞–≤–Ω–∞",
        "—ç–ª–µ–∫—Ç—Ä–æ—É–≥–ª–∏",
        "–ª–∏–∫–∏–Ω–æ-–¥—É–ª—ë–≤–æ",
        "–¥–∞–≤—ã–¥–æ–≤–æ",
        "–∫—É—Ä–æ–≤—Å–∫–æ–µ",
        "–µ–≥–æ—Ä—å–µ–≤—Å–∫",
        "–∫–æ–ª–æ–º–Ω–∞",
        "–≤–æ—Å–∫—Ä–µ—Å–µ–Ω—Å–∫",
        "–±–µ–ª–æ–æ–∑—ë—Ä—Å–∫–∏–π",
        "—Ö–æ—Ä–ª–æ–≤–æ",
        "—Ä–∞–º–µ–Ω—Å–∫–æ–µ",
        "–∂—É–∫–æ–≤—Å–∫–∏–π",
        "–±—ã–∫–æ–≤–æ",
        "–∫—Ä–∞—Å–∫–æ–≤–æ",
        "–º–∞–ª–∞—Ö–æ–≤–∫–∞",
        "—É–¥–µ–ª—å–Ω–∞—è",
        "—Ç–æ–º–∏–ª–∏–Ω–æ",
        "–∫—Ä–∞—Å–Ω–æ–≥–æ—Ä—Å–∫",
        "–Ω–∞—Ö–∞–±–∏–Ω–æ",
        "–æ–ø–∞–ª–∏—Ö–∞",
        "–∞—Ä—Ö–∞–Ω–≥–µ–ª—å—Å–∫–æ–µ",
        "–∏–ª—å–∏–Ω—Å–∫–æ–µ",
        "—Å—Ç–µ–ø–∞–Ω–æ–≤–æ",
        "–¥–µ–¥–æ–≤—Å–∫",
        "—Å–Ω–µ–≥–∏—Ä–∏",
        "—Ö–æ–ª–º–æ–≥–æ—Ä–∫–∞",
        "–ª–µ—Å–Ω–æ–π",
        "–ø–æ–≤–∞—Ä–æ–≤–æ",
        "–∞–Ω–¥—Ä–µ–µ–≤–∫–∞",
        "–∑–µ–ª–µ–Ω–æ–≥—Ä–∞–¥",
        "–∫—Ä—é–∫–æ–≤–æ",
        "—Å–∞–≤—ë–ª–∫–∏",
        "—Å–∏–ª–∏–Ω–æ",
        "—Å—Ç–∞—Ä–æ–µ –∫—Ä—é–∫–æ–≤–æ",
        "–∞–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–∫–∞",
        "–ª—É–∂–Ω–∏–∫–∏",
        "–º–∞—Ç–≤–µ–µ–≤—Å–∫–æ–µ",
        "–æ—á–∞–∫–æ–≤–æ",
        "–Ω–æ–≤–æ-–ø–µ—Ä–µ–¥–µ–ª–∫–∏–Ω–æ",
        "—Å–æ–ª–Ω—Ü–µ–≤–æ",
        "–≤–æ—Ä–æ–±—å—ë–≤—ã –≥–æ—Ä—ã",
        "–ª–µ–Ω–∏–Ω—Å–∫–∏–µ –≥–æ—Ä—ã",
        "—Ä–∞–º–µ–Ω–∫–∏",
        "–ø—Ä–æ—Å–ø–µ–∫—Ç –≤–µ—Ä–Ω–∞–¥—Å–∫–æ–≥–æ",
        "—É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç",
        "—á–µ—Ä—ë–º—É—à–∫–∏",
        "–Ω–æ–≤—ã–µ —á–µ—Ä—ë–º—É—à–∫–∏",
        "–∑—é–∑–∏–Ω–æ",
        "–∫–æ—Ç–ª–æ–≤–∫–∞",
        "–æ–±—Ä—É—á–µ–≤—Å–∫–∏–π",
        "–≥–∞–≥–∞—Ä–∏–Ω—Å–∫–∏–π",
        "–ª–µ–Ω–∏–Ω—Å–∫–∏–π –ø—Ä–æ—Å–ø–µ–∫—Ç",
        "—è–∫–∏–º–∞–Ω–∫–∞",
        "–∞—Ä–±–∞—Ç",
        "–ø—Ä–µ—Å–Ω–µ–Ω—Å–∫–∏–π",
        "—Ç–≤–µ—Ä—Å–∫–æ–π",
        "–º–µ—â–∞–Ω—Å–∫–∏–π",
        "–∫—Ä–∞—Å–Ω–æ—Å–µ–ª—å—Å–∫–∏–π",
        "–±–∞—Å–º–∞–Ω–Ω—ã–π",
        "—Ç–∞–≥–∞–Ω—Å–∫–∏–π",
        "–∑–∞–º–æ—Å–∫–≤–æ—Ä–µ—á—å–µ",
        "—Ö–∞–º–æ–≤–Ω–∏–∫–∏",
        "—è–∫–∏–º–∞–Ω–∫–∞",
        "–∫—Ä—ã–ª–∞—Ç—Å–∫–æ–µ",
        "–∫—É–Ω—Ü–µ–≤–æ",
        "—Ñ–∏–ª—ë–≤—Å–∫–∏–π –ø–∞—Ä–∫",
        "—Ñ–∏–ª–∏-–¥–∞–≤—ã–¥–∫–æ–≤–æ",
        "–¥–æ—Ä–æ—Ö–æ–≤–æ",
        "—Å–µ—Ç—É–Ω—å",
        "—Ç—Ä–æ–∏—Ü–∫",
        "–∫—Ä–∞—Å–Ω–∞—è –ø–∞—Ö—Ä–∞",
        "–∫–ª—ë–Ω–æ–≤–æ",
        "–ø–µ—Ä–≤–æ–º–∞–π—Å–∫–æ–µ",
        "–∫–∏–µ–≤—Å–∫–∏–π",
        "—â–µ—Ä–±–∏–Ω–∫–∞",
        "–ø–æ–¥–æ–ª—å—Å–∫",
        "–∫–ª–∏–º–æ–≤—Å–∫",
        "—á–µ—Ö–æ–≤",
        "—Å–µ—Ä–ø—É—Ö–æ–≤",
        "–ø—Ä–æ—Ç–≤–∏–Ω–æ",
        "–ø—É—â–∏–Ω–æ",
        "–ª–∏–ø–∏—Ü—ã",
        "–æ–±–æ–ª–µ–Ω—Å–∫",
        "—Ç–∞—Ä—É—Å–∞",
        "–∞–ø—Ä–µ–ª–µ–≤–∫–∞",
        "–∫–æ–∫–æ—à–∫–∏–Ω–æ",
        "–ª–µ—Å–Ω–æ–π –≥–æ—Ä–æ–¥–æ–∫",
        "–∞–ø—Ä–µ–ª–µ–≤–∫–∞",
        "—Å–µ–ª—è—Ç–∏–Ω–æ",
        "–Ω–∞—Ä–æ-—Ñ–æ–º–∏–Ω—Å–∫",
        "–∫—É–±–∏–Ω–∫–∞",
        "—Ç–µ–ø–ª–æ–≤–∫–∞",
        "–∑–∏–º—ë–Ω–∫–∏",
        "–∂—É–∫–æ–≤–∫–∞",
        "–Ω–∏–∫–æ–ª—å—Å–∫–æ–µ",
        "–ø–µ—Ç—Ä–æ–≤–æ-–¥–∞–ª—å–Ω–µ–µ",
        "–∏–ª—å–∏–Ω—Å–∫–æ–µ",
        "–ø–∞–≤–ª–æ–≤—Å–∫–∞—è —Å–ª–æ–±–æ–¥–∞",
        "–±—É–∑–ª–∞–Ω–æ–≤–æ",
        "—Å–Ω–µ–≥–∏—Ä–∏",
        "–¥—É–±–∫–∏",
        "–∂—É–∫–æ–≤–∫–∞",
        "–≥–æ—Ä–∫–∏-10",
        "–±–∞—Ä–≤–∏—Ö–∞",
        "—Ä–∞–∑–¥–æ—Ä—ã",
        "—É–ª—å—è–Ω–æ–≤–∫–∞",
        "–≥–æ—Ä–∫–∏-2",
        "–∑–∞—Ä–µ—á—å–µ",
        "–¥–º–∏—Ç—Ä–æ–≤",
        "—è—Ö—Ä–æ–º–∞",
        "–¥–æ–ª–≥–∏–µ –ø—Ä—É–¥—ã",
        "–ª—å–≤–æ–≤—Å–∫–∏–π",
        "–≥–æ—Ä—à–∫–æ–≤–æ",
        "—Å—Ö–æ–¥–Ω—è",
        "—Ñ–∏—Ä—Å–∞–Ω–æ–≤–∫–∞",
        "–ø–æ–¥—Ä–µ–∑–∫–æ–≤–æ",
        "–∑–µ–ª–µ–Ω–æ–≥—Ä–∞–¥",
        "—Å–æ–ª–Ω–µ—á–Ω–æ–≥–æ—Ä—Å–∫",
        "–ø–æ–≤–∞—Ä–æ–≤–æ",
        "–∞–Ω–¥—Ä–µ–µ–≤–∫–∞",
        "–ø–æ–≤–µ–¥–Ω–∏–∫–∏",
        "–∫—É–ø–∞–≤–Ω–∞",
        "—Å—Ç–∞—Ä–∞—è –∫—É–ø–∞–≤–Ω–∞",
        "—ç–ª–µ–∫—Ç—Ä–æ—É–≥–ª–∏",
        "—ç–ª–µ–∫—Ç—Ä–æ—Å—Ç–∞–ª—å",
        "–Ω–æ–≥–∏–Ω—Å–∫",
        "–ø–∞–≤–ª–æ–≤—Å–∫–∏–π –ø–æ—Å–∞–¥",
        "—ç–ª–µ–∫—Ç—Ä–æ–≥–æ—Ä—Å–∫",
        "–ª–∏–∫–∏–Ω–æ-–¥—É–ª—ë–≤–æ",
        "–¥–∞–≤—ã–¥–æ–≤–æ",
        "–∫—É—Ä–æ–≤—Å–∫–æ–µ",
        "–µ–≥–æ—Ä—å–µ–≤—Å–∫",
        "–∫–æ–ª–æ–º–Ω–∞",
        "–≤–æ—Å–∫—Ä–µ—Å–µ–Ω—Å–∫",
        "–±–µ–ª–æ–æ–∑—ë—Ä—Å–∫–∏–π",
        "—Ö–æ—Ä–ª–æ–≤–æ",
        "—Ä–∞–º–µ–Ω—Å–∫–æ–µ",
        "–∂—É–∫–æ–≤—Å–∫–∏–π",
        "–±—ã–∫–æ–≤–æ",
        "–∫—Ä–∞—Å–∫–æ–≤–æ",
        "–º–∞–ª–∞—Ö–æ–≤–∫–∞",
        "—É–¥–µ–ª—å–Ω–∞—è",
        "—Ç–æ–º–∏–ª–∏–Ω–æ",
        "–ª—é–±–µ—Ä—Ü—ã",
        "–∫–æ—Ç–µ–ª—å–Ω–∏–∫–∏",
        "–¥–∑–µ—Ä–∂–∏–Ω—Å–∫–∏–π",
        "–∂–µ–ª–µ–∑–Ω–æ–¥–æ—Ä–æ–∂–Ω—ã–π",
        "–±–∞–ª–∞—à–∏—Ö–∞",
        "—Ä–µ—É—Ç–æ–≤",
        "—â–µ–ª–∫–æ–≤–æ",
        "—Ñ—Ä—è–∑–∏–Ω–æ",
        "–∫–æ—Ä–æ–ª—ë–≤",
        "–º—ã—Ç–∏—â–∏",
        "–ø—É—à–∫–∏–Ω–æ",
        "–∏–≤–∞–Ω—Ç–µ–µ–≤–∫–∞",
        "–∫—Ä–∞—Å–Ω–æ–≥–æ—Ä—Å–∫",
        "—Ö–∏–º–∫–∏",
        "–¥–æ–ª–≥–æ–ø—Ä—É–¥–Ω—ã–π",
        "–ª–æ–±–Ω—è",
        "–∑–µ–ª–µ–Ω–æ–≥—Ä–∞–¥",
        "—Å–æ–ª–Ω–µ—á–Ω–æ–≥–æ—Ä—Å–∫",
        "–∫–ª–∏–Ω",
        "–≤—ã—Å–æ–∫–æ–≤—Å–∫",
        "—Ç–µ—Ä—è–µ–≤–æ",
        "–ø–æ–∫—Ä–æ–≤–∫–∞",
        "–Ω–æ–≤–æ–ø–µ—Ç—Ä–æ–≤—Å–∫–æ–µ",
        "–∏—Å—Ç—Ä–∞",
        "–¥–µ–¥–æ–≤—Å–∫",
        "—Å–Ω–µ–≥–∏—Ä–∏",
        "—Ö–æ–ª–º–æ–≥–æ—Ä–∫–∞",
        "–ª–µ—Å–Ω–æ–π",
        "–ø–æ–≤–∞—Ä–æ–≤–æ",
        "–∞–Ω–¥—Ä–µ–µ–≤–∫–∞",
        "—Å–æ–ª–Ω–µ—á–Ω–æ–≥–æ—Ä—Å–∫",
        "–ø–æ–≤–∞—Ä–æ–≤–æ",
        "–∞–Ω–¥—Ä–µ–µ–≤–∫–∞",
        "–ø–æ–≤–µ–¥–Ω–∏–∫–∏",
        "–∫—É–ø–∞–≤–Ω–∞",
        "—Å—Ç–∞—Ä–∞—è –∫—É–ø–∞–≤–Ω–∞",
        "—ç–ª–µ–∫—Ç—Ä–æ—É–≥–ª–∏",
        "—ç–ª–µ–∫—Ç—Ä–æ—Å—Ç–∞–ª—å",
        "–Ω–æ–≥–∏–Ω—Å–∫",
        "–ø–∞–≤–ª–æ–≤—Å–∫–∏–π –ø–æ—Å–∞–¥",
        "—ç–ª–µ–∫—Ç—Ä–æ–≥–æ—Ä—Å–∫",
        "–ª–∏–∫–∏–Ω–æ-–¥—É–ª—ë–≤–æ",
        "–¥–∞–≤—ã–¥–æ–≤–æ",
        "–∫—É—Ä–æ–≤—Å–∫–æ–µ",
        "–µ–≥–æ—Ä—å–µ–≤—Å–∫",
        "–∫–æ–ª–æ–º–Ω–∞",
        "–≤–æ—Å–∫—Ä–µ—Å–µ–Ω—Å–∫",
        "–±–µ–ª–æ–æ–∑—ë—Ä—Å–∫–∏–π",
        "—Ö–æ—Ä–ª–æ–≤–æ",
        "—Ä–∞–º–µ–Ω—Å–∫–æ–µ",
        "–∂—É–∫–æ–≤—Å–∫–∏–π",
        "–±—ã–∫–æ–≤–æ",
        "–∫—Ä–∞—Å–∫–æ–≤–æ",
        "–º–∞–ª–∞—Ö–æ–≤–∫–∞",
        "—É–¥–µ–ª—å–Ω–∞—è",
        "—Ç–æ–º–∏–ª–∏–Ω–æ",
        "–ª—é–±–µ—Ä—Ü—ã",
        "–∫–æ—Ç–µ–ª—å–Ω–∏–∫–∏",
        "–¥–∑–µ—Ä–∂–∏–Ω—Å–∫–∏–π",
        "–∂–µ–ª–µ–∑–Ω–æ–¥–æ—Ä–æ–∂–Ω—ã–π",
        "–±–∞–ª–∞—à–∏—Ö–∞",
        "—Ä–µ—É—Ç–æ–≤",
        "—â–µ–ª–∫–æ–≤–æ",
        "—Ñ—Ä—è–∑–∏–Ω–æ",
        "–∫–æ—Ä–æ–ª—ë–≤",
        "–º—ã—Ç–∏—â–∏",
        "–ø—É—à–∫–∏–Ω–æ",
        "–∏–≤–∞–Ω—Ç–µ–µ–≤–∫–∞",
        "–∫—Ä–∞—Å–Ω–æ–≥–æ—Ä—Å–∫",
        "—Ö–∏–º–∫–∏",
        "–¥–æ–ª–≥–æ–ø—Ä—É–¥–Ω—ã–π",
        "–ª–æ–±–Ω—è",
        "–∑–µ–ª–µ–Ω–æ–≥—Ä–∞–¥",
        "—Å–æ–ª–Ω–µ—á–Ω–æ–≥–æ—Ä—Å–∫",
        "–∫–ª–∏–Ω",
        "–≤—ã—Å–æ–∫–æ–≤—Å–∫",
        "—Ç–µ—Ä—è–µ–≤–æ",
        "–ø–æ–∫—Ä–æ–≤–∫–∞",
        "–Ω–æ–≤–æ–ø–µ—Ç—Ä–æ–≤—Å–∫–æ–µ",
        "–∏—Å—Ç—Ä–∞",
        "–¥–µ–¥–æ–≤—Å–∫",
        "—Å–Ω–µ–≥–∏—Ä–∏",
        "—Ö–æ–ª–º–æ–≥–æ—Ä–∫–∞",
        "–ª–µ—Å–Ω–æ–π",
        "–ø–æ–≤–∞—Ä–æ–≤–æ",
        "–∞–Ω–¥—Ä–µ–µ–≤–∫–∞",
        "—Å–æ–ª–Ω–µ—á–Ω–æ–≥–æ—Ä—Å–∫",
        "–ø–æ–≤–∞—Ä–æ–≤–æ",
        "–∞–Ω–¥—Ä–µ–µ–≤–∫–∞",
        "–ø–æ–≤–µ–¥–Ω–∏–∫–∏",
        "–∫—É–ø–∞–≤–Ω–∞",
        "—Å—Ç–∞—Ä–∞—è –∫—É–ø–∞–≤–Ω–∞",
        "—ç–ª–µ–∫—Ç—Ä–æ—É–≥–ª–∏",
        "—ç–ª–µ–∫—Ç—Ä–æ—Å—Ç–∞–ª—å",
        "–Ω–æ–≥–∏–Ω—Å–∫",
        "–ø–∞–≤–ª–æ–≤—Å–∫–∏–π –ø–æ—Å–∞–¥",
        "—ç–ª–µ–∫—Ç—Ä–æ–≥–æ—Ä—Å–∫",
        "–ª–∏–∫–∏–Ω–æ-–¥—É–ª—ë–≤–æ",
        "–¥–∞–≤—ã–¥–æ–≤–æ",
        "–∫—É—Ä–æ–≤—Å–∫–æ–µ",
        "–µ–≥–æ—Ä—å–µ–≤—Å–∫",
        "–∫–æ–ª–æ–º–Ω–∞",
        "–≤–æ—Å–∫—Ä–µ—Å–µ–Ω—Å–∫",
        "–±–µ–ª–æ–æ–∑—ë—Ä—Å–∫–∏–π",
        "—Ö–æ—Ä–ª–æ–≤–æ",
        "—Ä–∞–º–µ–Ω—Å–∫–æ–µ",
        "–∂—É–∫–æ–≤—Å–∫–∏–π",
        "–±—ã–∫–æ–≤–æ",
        "–∫—Ä–∞—Å–∫–æ–≤–æ",
        "–º–∞–ª–∞—Ö–æ–≤–∫–∞",
        "—É–¥–µ–ª—å–Ω–∞—è",
        "—Ç–æ–º–∏–ª–∏–Ω–æ",
        "–ª—é–±–µ—Ä—Ü—ã",
        "–∫–æ—Ç–µ–ª—å–Ω–∏–∫–∏",
        "–¥–∑–µ—Ä–∂–∏–Ω—Å–∫–∏–π",
        "–∂–µ–ª–µ–∑–Ω–æ–¥–æ—Ä–æ–∂–Ω—ã–π",
        "–±–∞–ª–∞—à–∏—Ö–∞",
        "—Ä–µ—É—Ç–æ–≤",
        "—â–µ–ª–∫–æ–≤–æ",
        "—Ñ—Ä—è–∑–∏–Ω–æ",
        "–∫–æ—Ä–æ–ª—ë–≤",
        "–º—ã—Ç–∏—â–∏",
        "–ø—É—à–∫–∏–Ω–æ",
        "–∏–≤–∞–Ω—Ç–µ–µ–≤–∫–∞",
        "–∫—Ä–∞—Å–Ω–æ–≥–æ—Ä—Å–∫",
        "—Ö–∏–º–∫–∏",
        "–¥–æ–ª–≥–æ–ø—Ä—É–¥–Ω—ã–π",
        "–ª–æ–±–Ω—è",
        "–∑–µ–ª–µ–Ω–æ–≥—Ä–∞–¥",
      ];

    try{
      const formattedCart = orderData.ordered_items
      .map(
        (item: any, index: number) =>
          `‚Ä¢ ${item.product_name} x${
            item.quantity
          }: ${item.price_at_time_of_order.toLocaleString("ru-RU")} ‚ÇΩ`
      )
      .join("\n")

      //–°–±–æ—Ä–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
      let WhatsMessage = "";
      if (!orderData.is_delivery){
        WhatsMessage = `–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ!\n\n–ü–æ–ª—É—á–∏–ª–∏ –≤–∞—à –∑–∞–∫–∞–∑ —Å —Å–∞–π—Ç–∞ ${site} ‚úÖ\n\n–ù–∞—à –∞–¥—Ä–µ—Å –¥–ª—è —Å–∞–º–æ–≤—ã–≤–æ–∑–∞:\n–ì.–ú–æ—Å–∫–≤–∞\n–†–∏–º—Å–∫–æ–≥–æ-–ö–æ—Ä—Å–∞–∫–æ–≤–∞ 11–∫8\n–û—Ä–∏–µ–Ω—Ç–∏—Ä –ø—É–Ω–∫—Ç ¬´OZON¬ª\n\n–û–ø–ª–∞—Ç–∞ –Ω–∞–ª–∏—á–Ω—ã–º–∏ ‚ùóÔ∏è‚ùóÔ∏è\n\n–°–æ–æ–±—â–∏—Ç–µ –∑–∞—Ä–∞–Ω–µ–µ, —á—Ç–æ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç–µ –ø–æ–¥—ä–µ—Ö–∞—Ç—å.\n\n–ü—Ä–∏ –∂–µ–ª–∞–Ω–∏–∏, –º–æ–∂–µ–º –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤–∞—à –∑–∞–∫–∞–∑ –Ø–Ω–¥–µ–∫—Å –∫—É—Ä—å–µ—Ä–æ–º –∏–ª–∏ –î–æ—Å—Ç–∞–≤–∏—Å—Ç–æ–π. –í —Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ, –æ–ø–ª–∞—Ç–∏—Ç—å –∑–∞–∫–∞–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–µ—Ä–µ–≤–æ–¥–æ–º –Ω–∞ –∫–∞—Ä—Ç—É.\n\n–ö–æ—Ä–∑–∏–Ω–∞:\n${formattedCart}`;
      }
      else if ((orderData.is_delivery && 
        moscowCities.some((city) => orderData.city.trim().toLowerCase().includes(city)))){
        WhatsMessage = `–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ!\n\n–ü–æ–ª—É—á–∏–ª–∏ –≤–∞—à –∑–∞–∫–∞–∑ —Å —Å–∞–π—Ç–∞ ${site} ‚úÖ\n\n–ó–∞–∫–∞–∑—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —á–µ—Ä–µ–∑ –Ø–Ω–¥–µ–∫—Å –∏–ª–∏ –î–æ—Å—Ç–∞–≤–∏—Å—Ç—É, –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ —Å–æ–≥–ª–∞—Å–æ–≤–∞–≤ —Å –≤–∞–º–∏ —Å—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏. –û–ø–ª–∞—Ç–∞ –∑–∞ –∑–∞–∫–∞–∑ - –ø–µ—Ä–µ–≤–æ–¥–æ–º –Ω–∞ –∫–∞—Ä—Ç—É.\n\n–ú–æ–∂–µ–º –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ –ª—é–±–æ–µ —É–¥–æ–±–Ω–æ–µ –¥–ª—è –í–∞—Å –≤—Ä–µ–º—è.\n\n‚ùóÔ∏è–ü–µ—Ä–≤—ã–π –∑–∞–∫–∞–∑ –º–æ–∂–Ω–æ –æ–ø–ª–∞—Ç–∏—Ç—å –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∫—É—Ä—å–µ—Ä—É –î–æ—Å—Ç–∞–≤–∏—Å—Ç—ã (–≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –ú–ö–ê–î)\n\n–ö–æ–≥–¥–∞ –í–∞–º –±—ã–ª–æ –±—ã —É–¥–æ–±–Ω–æ –ø—Ä–∏–Ω—è—Ç—å –∑–∞–∫–∞–∑? üòä\n\n–ö–æ—Ä–∑–∏–Ω–∞:\n${formattedCart}`;
      }
      else if (orderData.is_delivery){
        WhatsMessage = `–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ!\n–ü–æ–ª—É—á–∏–ª–∏ –≤–∞—à –∑–∞–∫–∞–∑ —Å —Å–∞–π—Ç–∞ ${site} ‚úÖ\n\n–í —Ä–µ–≥–∏–æ–Ω—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —á–µ—Ä–µ–∑ CDEK. –ü—Ä–æ—Ü–µ—Å—Å —Å–ª–µ–¥—É—é—â–∏–π:\n\n–í—ã—Å—ã–ª–∞–µ–º —Ñ–æ—Ç–æ –≤–∞—à–µ–≥–æ –∑–∞–∫–∞–∑–∞ –∏ –Ω–∞–∫–ª–∞–¥–Ω—É—é Cdek (–æ—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ –¥–æ–≥–æ–≤–æ—Ä—É, —Ç–∞—Ä–∏—Ñ—ã –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ, –¥–æ—Å—Ç–∞–≤–∫–∞ –±—É–¥–µ—Ç –æ–ø–ª–∞—á–µ–Ω–∞ –Ω–∞–º–∏ —Å—Ä–∞–∑—É –∏ –≤–∫–ª—é—á–µ–Ω–∞ –≤ –æ–±—â–∏–π —Å—á–µ—Ç).\n–í—ã—Å—ã–ª–∞–µ–º –≤–∞–º —Ä–µ–∫–≤–∏–∑–∏—Ç—ã –¥–ª—è –æ–ø–ª–∞—Ç—ã.\n\n–í—Å–µ –ø–æ—Å—ã–ª–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ –¥–µ–Ω—å –∑–∞–∫–∞–∑–∞.\n–û—Ç–ø—Ä–∞–≤–∫–∞ –∏–∑ –ú–æ—Å–∫–≤—ã ‚ùóÔ∏è\n–ù–∞–ª–æ–∂–µ–Ω–Ω—ã–º –ø–ª–∞—Ç–µ–∂–æ–º –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º ‚ùå‚ùå‚ùå\n\n–û—Ç –í–∞—Å –Ω—É–∂–Ω—ã —Å–ª–µ–¥ –¥–∞–Ω–Ω—ã–µ:\n\n–§–ò–û \n–ê–¥—Ä–µ—Å –±–ª–∏–∂ –ü–í–ó –°–î–≠–ö\n\n–ö–æ—Ä–∑–∏–Ω–∞:\n${formattedCart}`;
      }
      const idInstance = "1103290542";
      const apiTokenInstance =
          "65dee4a31f1342768913a5557afc548591af648dffc44259a6";
        await fetch(
          `https://api.green-api.com/waInstance${idInstance}/SendMessage/${apiTokenInstance}`,
          {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
              chatId: `${orderData.phone_number}@c.us`,
              message: WhatsMessage,
            }),
          }
        );
    } catch (error) {
      console.error("‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –≤ Whatsapp:", error);
      // –ù–µ –ø—Ä–µ—Ä—ã–≤–∞–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π –ø–æ—Ç–æ–∫ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞ –∏–∑-–∑–∞ –æ—à–∏–±–∫–∏ Telegram
      return false;
    }
    


}

  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    const { name, value } = e.target;
    setFormData((prev) => ({
      ...prev,
      [name]: value,
    }));
  };

  const handlePhoneChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    const value = e.target.value.replace(/\D/g, "");
    let formattedValue = "";

    if (value.length > 0) {
      formattedValue = "+7 ";
      if (value.length > 1) {
        formattedValue += `(${value.substring(1, 4)}`;
      }
      if (value.length > 4) {
        formattedValue += `) ${value.substring(4, 7)}`;
      }
      if (value.length > 7) {
        formattedValue += `-${value.substring(7, 9)}`;
      }
      if (value.length > 9) {
        formattedValue += `-${value.substring(9, 11)}`;
      }
    }

    setFormData((prev) => ({
      ...prev,
      phone: formattedValue,
    }));
  };

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    setIsSubmitting(true);

    // –í–∞–ª–∏–¥–∞—Ü–∏—è
    if (!formData.name.trim()) {
      alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è");
      setIsSubmitting(false);
      return;
    }

    if (
      !formData.phone.trim() ||
      formData.phone.replace(/\D/g, "").length < 11
    ) {
      alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞");
      setIsSubmitting(false);
      return;
    }

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–≥–ª–∞—Å–∏—è —Å –ø–æ–ª–∏—Ç–∏–∫–æ–π
    if (!agreementChecked) {
      alert(
        "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–æ–≥–ª–∞—Å–∏—Ç–µ—Å—å —Å –ø–æ–ª–∏—Ç–∏–∫–æ–π –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ–º"
      );
      setIsSubmitting(false);
      return;
    }

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –¥–ª—è –¥–æ—Å—Ç–∞–≤–∫–∏
    if (deliveryMethod === "delivery" && !canOrderDelivery()) {
      const restrictionReason = getDeliveryRestrictionReason();
      alert(restrictionReason || "–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ç–æ–≤–∞—Ä–æ–≤ –¥–ª—è –∑–∞–∫–∞–∑–∞ –¥–æ—Å—Ç–∞–≤–∫–∏");
      setIsSubmitting(false);
      return;
    }

    if (deliveryMethod === "delivery") {
      if (!formData.city.trim()) {
        alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –≥–æ—Ä–æ–¥");
        setIsSubmitting(false);
        return;
      }
      if (!formData.address.trim()) {
        alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∞–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏");
        setIsSubmitting(false);
        return;
      }
    }

    try {
      const orderPayload = {
        customer_name: formData.name,
        phone_number: formData.phone.replace(/\D/g, ""),
        is_delivery: deliveryMethod === "delivery",
        city: formData.city || "",
        address: formData.address || "",
        ordered_items: items.map((item) => ({
          product_name: item.name,
          quantity: item.quantity,
          price_at_time_of_order: item.price,
        })),
      };

      // üî• –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–∫–∞–∑ –Ω–∞ –±—ç–∫–µ–Ω–¥
      const res = await fetch("/api/orders", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(orderPayload),
      });

      if (!res.ok) {
        throw new Error("–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–∫–∞–∑–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä");
      }

      // üî• –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram
      const telegramSent = await sendTelegramNotification(orderPayload);

      if (!telegramSent) {
        console.warn(
          "‚ö†Ô∏è –ó–∞–∫–∞–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω, –Ω–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ"
        );
        // –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ, —Ç–∞–∫ –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–π –∑–∞–∫–∞–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω
      }

      // üî• –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Whatsapp
       const whatsSent = await sendWhatsappNotification(orderPayload);

       if (!whatsSent) {
        console.warn(
          "‚ö†Ô∏è –ó–∞–∫–∞–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω, –Ω–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Whats –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ"
        );
        // –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ, —Ç–∞–∫ –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–π –∑–∞–∫–∞–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω
      }

      clearCart();
      router.push("/order-success");
    } catch (error) {
      console.error(error);
      alert("–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–∫–∞–∑. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.");
    } finally {
      setIsSubmitting(false);
    }
  };

  // –î–æ–±–∞–≤–ª—è–µ–º noindex –º–µ—Ç–∞—Ç–µ–≥
  useEffect(() => {
    // –°–æ–∑–¥–∞–µ–º meta —Ç–µ–≥ –¥–ª—è noindex
    const metaNoindex = document.createElement("meta");
    metaNoindex.name = "robots";
    metaNoindex.content = "noindex, nofollow";
    document.head.appendChild(metaNoindex);

    // –û—á–∏—Å—Ç–∫–∞ –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
    return () => {
      document.head.removeChild(metaNoindex);
    };
  }, []);

  const { packs, blocks } = getProductCounts();
  const canDeliver = canOrderDelivery();
  const restrictionReason = getDeliveryRestrictionReason();

  if (items.length === 0) {
    return (
      <div className={styles.emptyCart}>
        <div className={styles.emptyCartContent}>
          <Image
            src="/cart/empty.svg"
            alt="–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞"
            width={150}
            height={150}
          />
          <h2>–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</h2>
          <p>–î–æ–±–∞–≤—å—Ç–µ —Ç–æ–≤–∞—Ä—ã –≤ –∫–æ—Ä–∑–∏–Ω—É –¥–ª—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞</p>
          <button
            className={styles.continueShopping}
            onClick={() => router.push("/catalog")}
          >
            –ü–µ—Ä–µ–π—Ç–∏ –≤ –∫–∞—Ç–∞–ª–æ–≥
          </button>
        </div>
      </div>
    );
  }

  return (
    <div className="hero-container">
      <div className={styles.container}>
        <h1 className={styles.title}>–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</h1>

        <div className={styles.content}>
          <div className={styles.formSection}>
            <form onSubmit={handleSubmit} className={styles.orderForm}>
              <div className={styles.formGroup}>
                <h3>–ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</h3>
                <div className={styles.inputGroup}>
                  <label htmlFor="name">–ò–º—è *</label>
                  <input
                    type="text"
                    id="name"
                    name="name"
                    value={formData.name}
                    onChange={handleInputChange}
                    required
                    placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è"
                  />
                </div>
                <div className={styles.inputGroup}>
                  <label htmlFor="phone">–¢–µ–ª–µ—Ñ–æ–Ω *</label>
                  <input
                    type="tel"
                    id="phone"
                    name="phone"
                    value={formData.phone}
                    onChange={handlePhoneChange}
                    required
                    placeholder="+7 (999) 999-99-99"
                  />
                </div>
              </div>

              <div className={styles.formGroup}>
                <h3>–°–ø–æ—Å–æ–± –ø–æ–ª—É—á–µ–Ω–∏—è</h3>

                {/* –°–æ–æ–±—â–µ–Ω–∏–µ –æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–∞–º–æ–≤—ã–≤–æ–∑–∞ */}
                <div className={styles.pickupDisabled}>
                  <div className={styles.pickupDisabledIcon}>‚ö†Ô∏è</div>
                  <div className={styles.pickupDisabledText}>
                    <strong>–°–∞–º–æ–≤—ã–≤–æ–∑ –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω</strong>
                    <p>–í –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ –¥–æ—Å—Ç–∞–≤–∫–∞</p>
                  </div>
                </div>

                {/* –°–æ–æ–±—â–µ–Ω–∏–µ –æ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –¥–ª—è –¥–æ—Å—Ç–∞–≤–∫–∏ */}
                {!canDeliver && (
                  <div className={styles.deliveryWarning}>
                    <div className={styles.deliveryWarningIcon}>üö´</div>
                    <div className={styles.deliveryWarningText}>
                      <p className={styles.currentCount}>
                        –î–æ—Å—Ç–∞–≤–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ –æ—Ç 1 –±–ª–æ–∫–∞ –∏–ª–∏ 10 –ø–∞—á–µ–∫
                      </p>
                    </div>
                  </div>
                )}

                <div className={styles.deliveryMethods}>
                  {/* –°–∞–º–æ–≤—ã–≤–æ–∑ - –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω */}
                  <label
                    className={`${styles.deliveryMethod} ${styles.disabled}`}
                  >
                    <input
                      type="radio"
                      name="deliveryMethod"
                      value="pickup"
                      checked={false}
                      disabled
                      onChange={(e) =>
                        setDeliveryMethod(e.target.value as DeliveryMethod)
                      }
                    />
                    <span className={styles.radioCustom}></span>
                    <div className={styles.deliveryInfo}>
                      <span className={styles.deliveryTitle}>–°–∞–º–æ–≤—ã–≤–æ–∑</span>
                      <span className={styles.deliveryDescription}>
                        –í—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
                      </span>
                    </div>
                  </label>

                  {/* –î–æ—Å—Ç–∞–≤–∫–∞ - –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞ */}
                  <label
                    className={`${styles.deliveryMethod} ${
                      !canDeliver ? styles.disabled : ""
                    }`}
                  >
                    <input
                      type="radio"
                      name="deliveryMethod"
                      value="delivery"
                      checked={deliveryMethod === "delivery"}
                      disabled={!canDeliver}
                      onChange={(e) =>
                        setDeliveryMethod(e.target.value as DeliveryMethod)
                      }
                    />
                    <span className={styles.radioCustom}></span>
                    <div className={styles.deliveryInfo}>
                      <span className={styles.deliveryTitle}>–î–æ—Å—Ç–∞–≤–∫–∞</span>
                      <span className={styles.deliveryDescription}>
                        {canDeliver
                          ? "–°—Ç–æ–∏–º–æ—Å—Ç—å —É—Ç–æ—á–Ω—è–µ—Ç—Å—è"
                          : `–ú–∏–Ω–∏–º—É–º ${MIN_PACKS_FOR_DELIVERY} –ø–∞—á–µ–∫ –ò–õ–ò ${MIN_BLOCKS_FOR_DELIVERY} –±–ª–æ–∫ –ò–õ–ò ${MIN_ORDER_AMOUNT.toLocaleString(
                              "ru-RU"
                            )} ‚ÇΩ`}
                      </span>
                    </div>
                  </label>
                </div>

                {/* –ë–ª–æ–∫ —Å –ø–æ–ª—è–º–∏ –¥–ª—è –¥–æ—Å—Ç–∞–≤–∫–∏ */}
                {deliveryMethod === "delivery" && canDeliver && (
                  <div className={styles.deliveryFields}>
                    <div className={styles.inputGroup}>
                      <label htmlFor="city">–ì–æ—Ä–æ–¥ *</label>
                      <input
                        type="text"
                        id="city"
                        name="city"
                        value={formData.city}
                        onChange={handleInputChange}
                        required
                        placeholder="–í–≤–µ–¥–∏—Ç–µ –≥–æ—Ä–æ–¥"
                      />
                    </div>
                    <div className={styles.inputGroup}>
                      <label htmlFor="address">–ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏ *</label>
                      <input
                        type="text"
                        id="address"
                        name="address"
                        value={formData.address}
                        onChange={handleInputChange}
                        required
                        placeholder="–í–≤–µ–¥–∏—Ç–µ –∞–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏"
                      />
                    </div>
                  </div>
                )}
              </div>

              {/* –ë–ª–æ–∫ —Å–æ–≥–ª–∞—Å–∏—è —Å –ø–æ–ª–∏—Ç–∏–∫–æ–π */}
              <label className={styles.checkbox}>
                <input
                  type="checkbox"
                  required
                  checked={agreementChecked}
                  onChange={(e) => setAgreementChecked(e.target.checked)}
                />
                <span className={styles.checkboxText}>
                  –Ø —Å–æ–≥–ª–∞—à–∞—é—Å—å —Å{" "}
                  <a
                    href="/privacy-policy"
                    target="_blank"
                    className={styles.link}
                  >
                    –ø–æ–ª–∏—Ç–∏–∫–æ–π –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏
                  </a>{" "}
                  –∏{" "}
                  <a href="/terms" target="_blank" className={styles.link}>
                    –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ–º
                  </a>
                </span>
              </label>

              <button
                type="submit"
                className={styles.submitButton}
                disabled={isSubmitting || !canDeliver || !agreementChecked}
              >
                {isSubmitting ? (
                  <>
                    <div className={styles.spinner}></div>
                    –û—Ñ–æ—Ä–º–ª—è–µ–º –∑–∞–∫–∞–∑...
                  </>
                ) : !canDeliver ? (
                  "–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ç–æ–≤–∞—Ä–æ–≤ –¥–ª—è –∑–∞–∫–∞–∑–∞"
                ) : !agreementChecked ? (
                  "–ü—Ä–∏–º–∏—Ç–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ"
                ) : (
                  `–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑ ¬∑ ${totalPrice.toLocaleString("ru-RU")} ‚ÇΩ`
                )}
              </button>
            </form>
          </div>

          <div className={styles.cartSection}>
            <div className={styles.cartItems}>
              <h3>–í–∞—à –∑–∞–∫–∞–∑</h3>

              {/* –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–∞—á–µ–∫, –±–ª–æ–∫–æ–≤ –∏ —Å—É–º–º—ã */}

              {items.map((item) => (
                <div key={item.id} className={styles.cartItem}>
                  <div className={styles.cartItemImage}>
                    <Image
                      src={encodeImageUrl(item.imageUrl)}
                      alt={item.name}
                      width={80}
                      height={80}
                    />
                  </div>
                  <div className={styles.cartItemInfo}>
                    <h4 className={styles.cartItemName}>{item.name}</h4>
                    {item.variant && (
                      <p className={styles.cartItemVariant}>
                        {item.variant.name}
                      </p>
                    )}
                    <div className={styles.cartItemDetails}>
                      <span className={styles.cartItemQuantity}>
                        {item.quantity} —à—Ç.
                      </span>
                      <span className={styles.cartItemPrice}>
                        {item.price.toLocaleString("ru-RU")} ‚ÇΩ
                      </span>
                    </div>
                  </div>
                </div>
              ))}
            </div>

            <div className={styles.orderSummary}>
              <h3>–ò—Ç–æ–≥–∏ –∑–∞–∫–∞–∑–∞</h3>
              <div className={styles.summaryRow}>
                <span>
                  –¢–æ–≤–∞—Ä—ã ({items.reduce((sum, item) => sum + item.quantity, 0)}{" "}
                  —à—Ç.)
                </span>
                <span>{totalPrice.toLocaleString("ru-RU")} ‚ÇΩ</span>
              </div>
              <div className={styles.summaryRow}>
                <span>–î–æ—Å—Ç–∞–≤–∫–∞</span>
                <span>
                  {canDeliver ? "–†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ" : "–ù–µ–¥–æ—Å—Ç—É–ø–Ω–∞"}
                </span>
              </div>
              <div className={`${styles.summaryRow} ${styles.total}`}>
                <span>–ò—Ç–æ–≥–æ</span>
                <span className={styles.totalPrice}>
                  {totalPrice.toLocaleString("ru-RU")} ‚ÇΩ
                </span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
}
